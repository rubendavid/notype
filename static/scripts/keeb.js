const layoutObj = {
    "tkl-1": [
        [
            ["Esc",  1],
            [null, 1],
            ["F1",  1],
            ["F2",  1],
            ["F3",  1],
            ["F4",  1],
            [null, .5],
            ["F5",  1],
            ["F6",  1],
            ["F7",  1],
            ["F8",  1],
            [null, .5],
            ["F9",  1],
            ["F10",  1],
            ["F11",  1],
            ["F12",  1],
        ],
        [
            ["` ~",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Backspace",  2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.75],
        ],
        [
            ["Ctrl", 1.25],
            ["Super", 1.25],
            ["Alt", 1.25],
            ["", 6],
            ["Alt", 1.25],
            ["Super", 1.25],
            ["Menu", 1.25],
            ["Ctrl", 1.25],
        ],
    ],
    "tkl-2": [
        [
            ["Esc",  1],
            [null, 1],
            ["F1",  1],
            ["F2",  1],
            ["F3",  1],
            ["F4",  1],
            [null, .5],
            ["F5",  1],
            ["F6",  1],
            ["F7",  1],
            ["F8",  1],
            [null, .5],
            ["F9",  1],
            ["F10",  1],
            ["F11",  1],
            ["F12",  1],
        ],
        [
            ["` ~",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Backspace",  2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.75],
        ],
        [
            ["Ctrl", 1.25],
            ["Super", 1.25],
            ["Alt", 1.25],
            ["", 7],
            ["Alt", 1.25],
            ["Super", 1.25],
            ["Ctrl", 1.25],
        ],
    ],
    "wkl-1": [
        [
            ["Esc",  1],
            [null, 1],
            ["F1",  1],
            ["F2",  1],
            ["F3",  1],
            ["F4",  1],
            [null, .5],
            ["F5",  1],
            ["F6",  1],
            ["F7",  1],
            ["F8",  1],
            [null, .5],
            ["F9",  1],
            ["F10",  1],
            ["F11",  1],
            ["F12",  1],
        ],
        [
            ["` ~",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Backspace",  2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.75],
        ],
        [
            ["Ctrl", 1.25],
            [null, 1.25],
            ["Alt", 1.25],
            ["", 6],
            ["Alt", 1.25],
            [null, 1.25],
            ["Menu", 1.25],
            ["Ctrl", 1.25],
        ],
    ],
    "wkl-2": [
        [
            ["Esc",  1],
            [null, 1],
            ["F1",  1],
            ["F2",  1],
            ["F3",  1],
            ["F4",  1],
            [null, .5],
            ["F5",  1],
            ["F6",  1],
            ["F7",  1],
            ["F8",  1],
            [null, .5],
            ["F9",  1],
            ["F10",  1],
            ["F11",  1],
            ["F12",  1],
        ],
        [
            ["` ~",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Backspace",  2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.75],
        ],
        [
            ["Ctrl", 1.25],
            [null, 1.25],
            ["Alt", 1.25],
            ["", 7],
            ["Alt", 1.25],
            [null, 1.25],
            ["Ctrl", 1.25],
        ],
    ],
    75: [
        [
            ["Esc",  1],
            ["F1",  1],
            ["F2",  1],
            ["F3",  1],
            ["F4",  1],
            ["F5",  1],
            ["F6",  1],
            ["F7",  1],
            ["F8",  1],
            ["F9",  1],
            ["F10",  1],
            ["F11",  1],
            ["F12",  1],
            ["PrtSc",  1],
            ["ScrLk",  1],
        ],
        [
            ["` ~",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Back", 2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 1.75],
            [null, 1],
        ],
        [
            ["Ctrl", 1.25],
            ["Super", 1.25],
            ["Alt", 1.25],
            ["", 7],
            ["Alt", 1],
            ["Fn", 1],
            ["Ctrl", 1],
            [null, 2],
        ],
    ],
    65: [
        [
            ["Esc",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Back", 2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.25],
            [null, .5],
        ],
        [
            ["Ctrl", 1.25],
            ["Super", 1.25],
            ["Alt", 1.25],
            ["", 7],
            ["Alt", 1.25],
            ["Ctrl", 1.25],
            ["Fn", 1.25],
            [null, 1.5],
        ],
    ],
    60: [
        [
            ["Esc",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Back", 2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.75],
        ],
        [
            ["Ctrl", 1.25],
            ["Super", 1.25],
            ["Alt", 1.25],
            ["", 7],
            ["Alt", 1.25],
            ["Super", 1.25],
            ["Ctrl", 1.25],
            ["Fn", 1.25],
        ],
    ],
    "60-wkl": [
        [
            ["Esc",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["Back", 2],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["\\ |", 1.5],
        ],
        [
            ["Caps", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 2.75],
        ],
        [
            ["Ctrl", 1.25],
            [null, 1.25],
            ["Alt", 1.25],
            ["", 7],
            ["Alt", 1.25],
            [null, 1.25],
            ["Ctrl", 1.25],
            ["Fn", 1.25],
        ],
    ],
    hhkb: [
        [
            ["Esc",  1],
            ["1 !",  1],
            ["2 @",  1],
            ["3 #",  1],
            ["4 $",  1],
            ["5 %",  1],
            ["6 ^",  1],
            ["7 &",  1],
            ["8 *",  1],
            ["9 (",  1],
            ["0 )",  1],
            ["- _",  1],
            ["= +",  1],
            ["\\ |", 1],
            ["` ~",  1],
        ],
        [
            ["Tab", 1.5],
            ["Q", 1],
            ["W", 1],
            ["E", 1],
            ["R", 1],
            ["T", 1],
            ["Y", 1],
            ["U", 1],
            ["I", 1],
            ["O", 1],
            ["P", 1],
            ["[ {", 1],
            ["] }", 1],
            ["Back", 1.5],
        ],
        [
            ["Control", 1.75],
            ["A", 1],
            ["S", 1],
            ["D", 1],
            ["F", 1],
            ["G", 1],
            ["H", 1],
            ["J", 1],
            ["K", 1],
            ["L", 1],
            ["; :", 1],
            ["' \"", 1],
            ["Enter", 2.25],
        ],
        [
            ["Shift", 2.25],
            ["Z", 1],
            ["X", 1],
            ["C", 1],
            ["V", 1],
            ["B", 1],
            ["N", 1],
            ["M", 1],
            [", <", 1],
            [". >", 1],
            ["/ ?", 1],
            ["Shift", 1.75],
            ["Fn", 1],
        ],
        [
            ["Alt", 1],
            ["Super", 1.25],
            ["", 7],
            ["Super", 1.25],
            ["Alt", 1],
        ],
    ],
};

function clearLayout() {
    $("main section#keeb").html("");
}

function setLayout(layout) {
    // if `layout` is not a key of layoutObj, throw erro 
    if (!layoutObj.hasOwnProperty(layout)) {
        throw `Invalid keeb layout '${layout}' passed to setLayout() function`;
    }
    // loop through keyboard rows and their keys and add to the #keeb section
    let layoutString = "";
    for (let row of layoutObj[layout]) {
        layoutString += "<div class='keebRow'>";
        for (let key of row) {
            if (key.length !== 2) {
                throw `Key '${key}' does not have length 2`;
            }
            let keySize = key[1];               
            if (key[0] === null) {
                layoutString += `<div class='emptySpace' style='width: calc(100% * ${keySize} / 15);'></div>`;
                continue;
            }
            layoutString += `<div class='keebKey' style='width: calc(100% * ${keySize} / 15);'>`;
            
            let splitString = key[0].split(" ")
            let numChars = splitString.length;
            if (numChars === 2) {
                layoutString += `<div class='twoChars'>
                <div class='shift'>${splitString[1]}</div>
                <div class='main'>${splitString[0]}</div>
                </div>`;
            } else {
                layoutString += `<div class='oneChar'>${key[0]}</div>`
            }
            layoutString += "</div>";
        }
        layoutString += "</div>";
    }
    $("main section#keeb").append(layoutString);
}

$(document).ready( function () {
    setLayout("tkl-1");
    $("#layoutPicker").change( function () {
        clearLayout();
        setLayout($(this).val());
    });
});

